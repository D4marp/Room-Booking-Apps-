================================================================================
üîß FIX FIRESTORE RULES - STEP BY STEP
================================================================================

‚úÖ MASALAH SEKARANG:
   - Booking READ hanya allowed untuk owner atau admin
   - Query bookings fail karena app memerlukan read semua bookings untuk lihat schedule

‚úÖ SOLUSI:
   - Ubah booking read rule jadi allow untuk semua authenticated users
   - Keep write protection (hanya owner/admin yang bisa create/update/delete)

================================================================================
LANGKAH-LANGKAH FIX:
================================================================================

1Ô∏è‚É£ COPY RULES BARU
   - Buka file: FIRESTORE_RULES_FIXED.txt (di project root)
   - Pilih semua (Ctrl+A / Cmd+A)
   - Copy (Ctrl+C / Cmd+C)

2Ô∏è‚É£ BUKA FIREBASE CONSOLE
   - https://console.firebase.google.com
   - Pilih project "Room Booking Apps"
   - Klik "Firestore Database" (menu kiri)
   - Klik tab "Rules"

3Ô∏è‚É£ REPLACE RULES LAMA
   - Hapus semua rules yang ada sekarang
   - Paste rules baru dari FIRESTORE_RULES_FIXED.txt
   - Harus terlihat seperti file di atas

4Ô∏è‚É£ PUBLISH
   - Klik tombol "Publish" (biru, top right)
   - Tunggu loading selesai
   - Harus ada green checkmark

5Ô∏è‚É£ TEST DI APP
   - Close Firebase Console
   - Di app: Hot restart (R key) atau Flutter: Run Free All
   - Buka room ‚Üí klik Book Now
   - Coba buat booking
   - Cek logcat untuk success message

================================================================================
WHAT CHANGED:
================================================================================

BEFORE:
```
allow read: if request.auth != null && 
               (resource.data.userId == request.auth.uid || 
                get(...).data.role == 'admin');
```
‚ùå Hanya owner/admin bisa READ booking

AFTER:
```
allow read: if request.auth != null;
```
‚úÖ Semua authenticated users bisa READ bookings (untuk lihat schedule)

KEEP SAME (Write protection tetap ketat):
```
allow create: if request.auth != null && 
                 request.resource.data.userId == request.auth.uid;

allow update, delete: if request.auth != null && 
                         (resource.data.userId == request.auth.uid || 
                          get(...).data.role == 'admin');
```
‚úÖ Users hanya bisa create/edit/delete bookings mereka sendiri
‚úÖ Admins bisa manage semua bookings

================================================================================
EXPECTED RESULT AFTER:
================================================================================

Debug Output:
‚úÖ "üîç Fetching bookings for room: fzjyGq62qx3gQeDZ0s23"
‚úÖ "üìä Found 1 bookings in Firestore for room fzjyGq62qx3gQeDZ0s23"
‚úÖ "üìÖ RoomDetailsScreen: Loaded 1 bookings for room fzjyGq62qx3gQeDZ0s23"

Schedule muncul:
‚úÖ 08:00 - 17:00 ‚úì
‚úÖ 1 guest ‚úì
‚úÖ Status: CONFIRMED ‚úì

Book Now:
‚úÖ Form bisa dibuka
‚úÖ Bisa submit
‚úÖ Toast: "Booking confirmed! ‚úì"
‚úÖ Firestore Console: booking muncul di /bookings collection

================================================================================
JIKA MASIH GAGAL:
================================================================================

1. Cek rules sudah published (Firebase Console Rules tab)
2. Full rebuild: flutter clean && flutter pub get && flutter run
3. Cek user sudah login
4. Lihat error message di logcat for clue

TIPS: Rules caching bisa sampai 5 menit, tapi usually instant.
Kalau perlu cepat, try:
- Logout ‚Üí Login ulang di app
- Atau close app completely, then reopen

================================================================================
